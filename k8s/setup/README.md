# kind ë©€í‹° ë…¸ë“œ í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ê°€ì´ë“œ

## ì „ì²´ êµ¬ì¡° ì´í•´í•˜ê¸°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Windows ë¡œì»¬ PC (ë‹¹ì‹ ì˜ ì»´í“¨í„°)                              â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Docker Desktop                                        â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  â”‚ Master Node  â”‚  â”‚ Worker Node1 â”‚  â”‚ Worker Node2 â”‚â”‚  â”‚
â”‚  â”‚  â”‚  (ì»¨í…Œì´ë„ˆ)  â”‚  â”‚  (ì»¨í…Œì´ë„ˆ)  â”‚  â”‚  (ì»¨í…Œì´ë„ˆ)  â”‚â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚â”‚  â”‚
â”‚  â”‚  â”‚  Control     â”‚  â”‚   Pod ì‹¤í–‰   â”‚  â”‚   Pod ì‹¤í–‰   â”‚â”‚  â”‚
â”‚  â”‚  â”‚  Plane       â”‚  â”‚   ê³µê°„       â”‚  â”‚   ê³µê°„       â”‚â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  kubectl ëª…ë ¹ì–´ë¡œ ê´€ë¦¬                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ì‚¬ì „ ì¤€ë¹„

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

1. **Docker Desktop** ì„¤ì¹˜ ë° ì‹¤í–‰
   - ë‹¤ìš´ë¡œë“œ: https://www.docker.com/products/docker-desktop
   - ì„¤ì¹˜ í›„ Docker Desktopì„ ì‹¤í–‰í•˜ì„¸ìš”
   - Docker Desktopì˜ KubernetesëŠ” ë¹„í™œì„±í™”í•´ë„ ë©ë‹ˆë‹¤

2. **kubectl** ì„¤ì¹˜
   - Docker Desktop ì„¤ì¹˜ ì‹œ ìë™ í¬í•¨
   - í™•ì¸: `kubectl version --client`

3. **ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤**
   - RAM: ìµœì†Œ 8GB (ê¶Œì¥ 16GB)
   - CPU: ìµœì†Œ 4ì½”ì–´ (ê¶Œì¥ 6ì½”ì–´ ì´ìƒ)
   - ë””ìŠ¤í¬: ì—¬ìœ  ê³µê°„ 10GB ì´ìƒ

### ë¦¬ì†ŒìŠ¤ ë°°ë¶„ ì˜ˆì‹œ

```
ì´ RAM 16GB ì‹œìŠ¤í…œ ê¸°ì¤€:
- Windows OS: 4GB
- Docker Desktop: 8GB (ì„¤ì • í•„ìš”)
  â”œâ”€ Master Node: 2GB
  â”œâ”€ Worker Node1: 3GB
  â””â”€ Worker Node2: 3GB
- ê¸°íƒ€ ì• í”Œë¦¬ì¼€ì´ì…˜: 4GB
```

Docker Desktop ë©”ëª¨ë¦¬ ì„¤ì •:
1. Docker Desktop â†’ Settings â†’ Resources
2. Memoryë¥¼ 8GB ì´ìƒìœ¼ë¡œ ì„¤ì •
3. Apply & Restart

## ì„¤ì¹˜ ë‹¨ê³„

### 1ë‹¨ê³„: kind ì„¤ì¹˜

#### ë°©ë²• 1: Chocolatey ì‚¬ìš© (ê¶Œì¥)

PowerShellì„ **ê´€ë¦¬ì ê¶Œí•œ**ìœ¼ë¡œ ì‹¤í–‰:

```powershell
# Chocolatey ì„¤ì¹˜ (ì•„ì§ ì—†ë‹¤ë©´)
Set-ExecutionPolicy Bypass -Scope Process -Force
[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072
iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))

# kind ì„¤ì¹˜
choco install kind -y
```

#### ë°©ë²• 2: winget ì‚¬ìš© (Windows 11 ë˜ëŠ” ìµœì‹  Windows 10)

```powershell
winget install Kubernetes.kind
```

#### ë°©ë²• 3: ìˆ˜ë™ ë‹¤ìš´ë¡œë“œ

1. https://kind.sigs.k8s.io/dl/latest/kind-windows-amd64 ë‹¤ìš´ë¡œë“œ
2. `kind.exe`ë¡œ ì´ë¦„ ë³€ê²½
3. `C:\Windows\System32\` ë˜ëŠ” PATHì— ìˆëŠ” í´ë”ë¡œ ì´ë™

#### ì„¤ì¹˜ í™•ì¸

```powershell
kind version
# ì¶œë ¥ ì˜ˆì‹œ: kind v0.20.0 go1.21.0 windows/amd64
```

### 2ë‹¨ê³„: í´ëŸ¬ìŠ¤í„° ìƒì„±

PowerShellì—ì„œ k8s/setup ë””ë ‰í† ë¦¬ë¡œ ì´ë™:

```powershell
cd C:\Users\zkvpt\Desktop\javatest\k8s\setup
```

#### ë°©ë²• 1: ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© (ê¶Œì¥)

```powershell
# í´ëŸ¬ìŠ¤í„° ìƒì„±
.\manage-cluster.ps1 create

# ìƒíƒœ í™•ì¸
.\manage-cluster.ps1 status

# í´ëŸ¬ìŠ¤í„° ì‚­ì œ (í•„ìš”ì‹œ)
.\manage-cluster.ps1 delete
```

#### ë°©ë²• 2: ì§ì ‘ ëª…ë ¹ì–´ ì‚¬ìš©

```powershell
# í´ëŸ¬ìŠ¤í„° ìƒì„± (2-3ë¶„ ì†Œìš”)
kind create cluster --config=kind-cluster-config.yaml

# ìƒì„± ì¤‘ ì¶œë ¥ ì˜ˆì‹œ:
# Creating cluster "spring-boot-cluster" ...
#  âœ“ Ensuring node image (kindest/node:v1.27.3) ğŸ–¼
#  âœ“ Preparing nodes ğŸ“¦ ğŸ“¦ ğŸ“¦
#  âœ“ Writing configuration ğŸ“œ
#  âœ“ Starting control-plane ğŸ•¹ï¸
#  âœ“ Installing CNI ğŸ”Œ
#  âœ“ Installing StorageClass ğŸ’¾
#  âœ“ Joining worker nodes ğŸšœ
# Set kubectl context to "kind-spring-boot-cluster"
```

### 3ë‹¨ê³„: í´ëŸ¬ìŠ¤í„° í™•ì¸

```powershell
# ë…¸ë“œ í™•ì¸ (Master 1 + Worker 2 = ì´ 3ê°œ)
kubectl get nodes

# ì¶œë ¥ ì˜ˆì‹œ:
# NAME                                STATUS   ROLES           AGE   VERSION
# spring-boot-cluster-control-plane   Ready    control-plane   2m    v1.27.3
# spring-boot-cluster-worker          Ready    <none>          2m    v1.27.3
# spring-boot-cluster-worker2         Ready    <none>          2m    v1.27.3
```

```powershell
# ë…¸ë“œ ìƒì„¸ ì •ë³´ (IP, OS ë“±)
kubectl get nodes -o wide

# ë…¸ë“œ ë ˆì´ë¸” í™•ì¸
kubectl get nodes --show-labels
```

```powershell
# Docker ì»¨í…Œì´ë„ˆë¡œ í™•ì¸ (kind ë…¸ë“œëŠ” ì‹¤ì œë¡œ Docker ì»¨í…Œì´ë„ˆ)
docker ps --filter "name=spring-boot-cluster"

# ì¶œë ¥ ì˜ˆì‹œ:
# CONTAINER ID   IMAGE                  NAMES
# xxxxxxxxxxxx   kindest/node:v1.27.3   spring-boot-cluster-worker2
# xxxxxxxxxxxx   kindest/node:v1.27.3   spring-boot-cluster-worker
# xxxxxxxxxxxx   kindest/node:v1.27.3   spring-boot-cluster-control-plane
```

### 4ë‹¨ê³„: kubectl ì»¨í…ìŠ¤íŠ¸ í™•ì¸

```powershell
# í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ í™•ì¸
kubectl config current-context
# ì¶œë ¥: kind-spring-boot-cluster

# ëª¨ë“  ì»¨í…ìŠ¤íŠ¸ ë³´ê¸°
kubectl config get-contexts

# kind í´ëŸ¬ìŠ¤í„°ë¡œ ì „í™˜ (í•„ìš”ì‹œ)
kubectl config use-context kind-spring-boot-cluster
```

## í´ëŸ¬ìŠ¤í„° í…ŒìŠ¤íŠ¸

### í…ŒìŠ¤íŠ¸ Pod ë°°í¬

```powershell
# nginx Pod 3ê°œ ë°°í¬
kubectl create deployment nginx-test --image=nginx --replicas=3

# Pod ìƒíƒœ í™•ì¸ (ì–´ëŠ ë…¸ë“œì— ë°°í¬ë˜ì—ˆëŠ”ì§€ í™•ì¸)
kubectl get pods -o wide

# ì¶œë ¥ ì˜ˆì‹œ:
# NAME                          READY   STATUS    NODE
# nginx-test-7d8b49c9d9-abcde   1/1     Running   spring-boot-cluster-worker
# nginx-test-7d8b49c9d9-fghij   1/1     Running   spring-boot-cluster-worker2
# nginx-test-7d8b49c9d9-klmno   1/1     Running   spring-boot-cluster-worker
```

ë³´ì‹œë‹¤ì‹œí”¼ Podë“¤ì´ **Worker ë…¸ë“œë“¤ì— ë¶„ì‚° ë°°í¬**ë©ë‹ˆë‹¤!

### í…ŒìŠ¤íŠ¸ ì •ë¦¬

```powershell
kubectl delete deployment nginx-test
```

## í˜„ì¬ í”„ë¡œì íŠ¸ ë°°í¬í•˜ê¸°

### Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ Docker ì´ë¯¸ì§€ ë¹Œë“œ

```powershell
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¡œ ì´ë™
cd C:\Users\zkvpt\Desktop\javatest

# Docker ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t spring-boot-app:latest .

# kind í´ëŸ¬ìŠ¤í„°ì— ì´ë¯¸ì§€ ë¡œë“œ
kind load docker-image spring-boot-app:latest --name spring-boot-cluster
```

### Kubernetes ë¦¬ì†ŒìŠ¤ ë°°í¬

```powershell
# k8s ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd k8s

# ConfigMap ë° Secret ë°°í¬
kubectl apply -f configmap.yaml
kubectl apply -f secret.yaml

# Deployment ë°°í¬
kubectl apply -f deployment.yaml

# Service ë°°í¬
kubectl apply -f service.yaml

# (ì„ íƒ) Ingress ë°°í¬
kubectl apply -f ingress.yaml
```

### ë°°í¬ í™•ì¸

```powershell
# Pod í™•ì¸ (ì–´ëŠ Worker ë…¸ë“œì— ë°°í¬ë˜ì—ˆëŠ”ì§€ í™•ì¸)
kubectl get pods -o wide

# Service í™•ì¸
kubectl get svc

# ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ í™•ì¸
kubectl logs -f deployment/spring-boot-app
```

### ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ê·¼

NodePort ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:

```powershell
# Service í¬íŠ¸ í™•ì¸
kubectl get svc spring-boot-app

# ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ê·¼
# http://localhost:30080 (kind-cluster-config.yamlì—ì„œ ì„¤ì •í•œ í¬íŠ¸)
```

Port Forwardë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:

```powershell
# í¬íŠ¸ í¬ì›Œë”© (ë¡œì»¬ 8082 â†’ Pod 8082)
kubectl port-forward deployment/spring-boot-app 8082:8082

# ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ê·¼
# http://localhost:8082
```

## ë©€í‹° ë…¸ë“œ ë™ì‘ í™•ì¸

### Podê°€ ì—¬ëŸ¬ Workerì— ë¶„ì‚°ë˜ëŠ”ì§€ í™•ì¸

```powershell
# Deployment ìŠ¤ì¼€ì¼ ì¦ê°€
kubectl scale deployment spring-boot-app --replicas=6

# Pod ë°°í¬ ìœ„ì¹˜ í™•ì¸
kubectl get pods -o wide | findstr spring-boot-app

# ì¶œë ¥ ì˜ˆì‹œ:
# spring-boot-app-xxx   1/1   Running   spring-boot-cluster-worker
# spring-boot-app-yyy   1/1   Running   spring-boot-cluster-worker2
# spring-boot-app-zzz   1/1   Running   spring-boot-cluster-worker
# spring-boot-app-aaa   1/1   Running   spring-boot-cluster-worker2
# spring-boot-app-bbb   1/1   Running   spring-boot-cluster-worker
# spring-boot-app-ccc   1/1   Running   spring-boot-cluster-worker2
```

Worker1ê³¼ Worker2ì— ê³ ë¥´ê²Œ ë¶„ì‚°ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

### ë…¸ë“œë³„ Pod ìˆ˜ í™•ì¸

```powershell
# ê° ë…¸ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Pod ìˆ˜
kubectl get pods -A -o wide | findstr worker | Measure-Object -Line
kubectl get pods -A -o wide | findstr worker2 | Measure-Object -Line
```

### íŠ¹ì • ë…¸ë“œì— Pod ë°°í¬í•˜ê¸° (Node Selector í…ŒìŠ¤íŠ¸)

deployment.yamlì— nodeSelector ì¶”ê°€:

```yaml
spec:
  template:
    spec:
      nodeSelector:
        worker-id: "1"  # Worker 1ì—ë§Œ ë°°í¬
```

ì ìš© í›„ í™•ì¸:

```powershell
kubectl apply -f deployment.yaml
kubectl get pods -o wide
# ëª¨ë“  Podê°€ worker-id=1 ë ˆì´ë¸”ì„ ê°€ì§„ ë…¸ë“œì—ë§Œ ë°°í¬ë¨
```

## ë¬¸ì œ í•´ê²°

### í´ëŸ¬ìŠ¤í„° ìƒì„± ì‹¤íŒ¨

**ì¦ìƒ**: `Creating cluster "spring-boot-cluster" ...` ì—ì„œ ë©ˆì¶¤

**í•´ê²°**:
1. Docker Desktopì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
2. Docker Desktop ì¬ì‹œì‘
3. kind í´ëŸ¬ìŠ¤í„° ì‚­ì œ í›„ ì¬ìƒì„±

```powershell
kind delete cluster --name spring-boot-cluster
kind create cluster --config=kind-cluster-config.yaml
```

### kubectl ëª…ë ¹ì–´ê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ

**ì¦ìƒ**: `The connection to the server localhost:8080 was refused`

**í•´ê²°**:
```powershell
# ì»¨í…ìŠ¤íŠ¸ í™•ì¸ ë° ì „í™˜
kubectl config get-contexts
kubectl config use-context kind-spring-boot-cluster
```

### Docker ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ

**ì¦ìƒ**: `ErrImagePull` ë˜ëŠ” `ImagePullBackOff`

**í•´ê²°**:
```powershell
# ì´ë¯¸ì§€ë¥¼ kind í´ëŸ¬ìŠ¤í„°ì— ë¡œë“œ
kind load docker-image spring-boot-app:latest --name spring-boot-cluster

# ì´ë¯¸ì§€ê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
docker exec -it spring-boot-cluster-worker crictl images | findstr spring-boot-app
```

### ë©”ëª¨ë¦¬ ë¶€ì¡± (OOM)

**ì¦ìƒ**: Podê°€ ìê¾¸ ì¬ì‹œì‘ë¨, `OOMKilled` ìƒíƒœ

**í•´ê²°**:
1. Docker Desktop ë©”ëª¨ë¦¬ ì¦ê°€ (Settings â†’ Resources â†’ Memory)
2. Podì˜ resource limits ì¡°ì •
3. í´ëŸ¬ìŠ¤í„° ì¬ì‹œì‘

```powershell
# í´ëŸ¬ìŠ¤í„° ì‚­ì œ ë° ì¬ìƒì„±
kind delete cluster --name spring-boot-cluster
# Docker Desktop ë©”ëª¨ë¦¬ ì„¤ì • ë³€ê²½ í›„
kind create cluster --config=kind-cluster-config.yaml
```

## ìœ ìš©í•œ ëª…ë ¹ì–´ ëª¨ìŒ

```powershell
# í´ëŸ¬ìŠ¤í„° ì •ë³´
kubectl cluster-info --context kind-spring-boot-cluster

# ëª¨ë“  ë¦¬ì†ŒìŠ¤ í™•ì¸
kubectl get all -A

# íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤
kubectl get all -n default

# Pod ë¡œê·¸ ì‹¤ì‹œê°„ ë³´ê¸°
kubectl logs -f <pod-name>

# Pod ë‚´ë¶€ ì ‘ì†
kubectl exec -it <pod-name> -- /bin/bash

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸ (Metrics Server ì„¤ì¹˜ í•„ìš”)
kubectl top nodes
kubectl top pods

# ì´ë²¤íŠ¸ í™•ì¸ (ë¬¸ì œ ì§„ë‹¨ì— ìœ ìš©)
kubectl get events --sort-by='.lastTimestamp'

# YAML ì¶œë ¥ (í˜„ì¬ ì„¤ì • í™•ì¸)
kubectl get deployment spring-boot-app -o yaml

# ë¦¬ì†ŒìŠ¤ ì‚­ì œ
kubectl delete -f deployment.yaml
kubectl delete all --all  # ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì‚­ì œ (ì£¼ì˜!)
```

## í´ëŸ¬ìŠ¤í„° ì •ë¦¬

### ì„ì‹œ ì •ë¦¬ (í´ëŸ¬ìŠ¤í„° ìœ ì§€)

```powershell
# ì• í”Œë¦¬ì¼€ì´ì…˜ë§Œ ì‚­ì œ
kubectl delete -f k8s/

# ë˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì „ì²´ ì •ë¦¬
kubectl delete all --all -n default
```

### ì™„ì „ ì •ë¦¬ (í´ëŸ¬ìŠ¤í„° ì‚­ì œ)

```powershell
# ë°©ë²• 1: ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
.\manage-cluster.ps1 delete

# ë°©ë²• 2: ì§ì ‘ ì‚­ì œ
kind delete cluster --name spring-boot-cluster

# ëª¨ë“  kind í´ëŸ¬ìŠ¤í„° ì‚­ì œ
kind delete clusters --all
```

## ë‹¤ìŒ ë‹¨ê³„

1. **Ingress Controller ì„¤ì¹˜** (ì™¸ë¶€ ì ‘ê·¼ ê´€ë¦¬)
   - nginx-ingress, traefik ë“±

2. **Monitoring êµ¬ì¶•** (ì‹œìŠ¤í…œ ê´€ì°°)
   - Prometheus + Grafana

3. **ë¡œê¹… ì‹œìŠ¤í…œ êµ¬ì¶•** (ë¡œê·¸ ìˆ˜ì§‘)
   - EFK Stack (Elasticsearch, Fluentd, Kibana)

4. **CI/CD ì—°ë™** (ìë™ ë°°í¬)
   - Jenkins, GitHub Actions

5. **HPA í…ŒìŠ¤íŠ¸** (ìë™ ìŠ¤ì¼€ì¼ë§)
   - Horizontal Pod Autoscaler

## ì°¸ê³  ìë£Œ

- kind ê³µì‹ ë¬¸ì„œ: https://kind.sigs.k8s.io/
- Kubernetes ê³µì‹ ë¬¸ì„œ: https://kubernetes.io/docs/
- kubectl Cheat Sheet: https://kubernetes.io/docs/reference/kubectl/cheatsheet/
